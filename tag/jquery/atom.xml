<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Jquery | Thijs Lensselink's Blog]]></title>
  <link href="http://lenss.nl/tag/jquery/atom.xml" rel="self"/>
  <link href="http://lenss.nl/"/>
  <updated>2012-12-15T00:18:17+01:00</updated>
  <id>http://lenss.nl/</id>
  <author>
    <name><![CDATA[Thijs Lensselink]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Jquery unrecognized expression error]]></title>
    <link href="http://lenss.nl/2011/08/jquery-unrecognized-expression-error/"/>
    <updated>2011-08-20T13:20:59+02:00</updated>
    <id>http://lenss.nl/2011/08/jquery-unrecognized-expression-error</id>
    <content type="html"><![CDATA[<p>While doing some front end work yesterday. I got trapped by a <a href="http://jquery.com/">jQuery</a> issue. Well not JQuery specific. The issue was actually triggered by some other hand crafted code. Every time i would click a link inside my grid view firebug would throw an error.</p>

<blockquote><p>uncaught exception: Syntax error, unrecognized expression: .</p></blockquote>

<p>And the markup that triggered the error was</p>

<pre><code>&lt;a href="" class="zipDownload"&gt;&lt;span class="icon_zipSmall"&gt;&lt;/span&gt;&lt;/a&gt;
</code></pre>

<p>Nothing wrong there right? And it actually took my quite some time to figure this one out. It would be nice to have a tool that can tell you there are multiple click events assigned to a element? But for now it was just some manual searching and testing.</p>

<p>The issue was caused by an other snippet of Javascript code inside another .js file. This piece of code attached a click event to every div inside a grid td. Which may be a bit to greedy.</p>

<pre><code>$('.admin .gridbg tr td span').click(function() {
</code></pre>

<p>And my link was in a nested td inside the grid. And also contained a span tag. So it was actually firing off two click events. From which one failed. Fixing it after that was easy. Either make the first click binding less greedy. Or change the markup of my second grid. I choose the last one.</p>

<pre><code>&lt;a href="http://lenss.nl" class="zipDownload icon_zipSmall"&gt;&lt;/a&gt;
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Jquery & PHP doing simple image slicing]]></title>
    <link href="http://lenss.nl/2010/11/jquery-php-doing-simple-image-slicing/"/>
    <updated>2010-11-01T17:34:11+01:00</updated>
    <id>http://lenss.nl/2010/11/jquery-php-doing-simple-image-slicing</id>
    <content type="html"><![CDATA[<p>Today i was in need of a basic image slicer. An there must be a million of these things out there. But i wanted to see how hard / easy it would be to create this myself.</p>

<p>Conclusion. It's not that hard when using the jquery library. which is becoming my Javascript framework of choice.</p>

<pre><code>&lt;script src="js/jquery-1.4.3.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script src="js/jquery-ui-1.8.5.custom.min.js" type="text/javascript"&gt;&lt;/script&gt;
</code></pre>

<p>I started with a div.</p>

<pre><code>&lt;div id="image_slicer_canvas"&gt;&lt;/div&gt;
</code></pre>

<p>Then i added the placeholder for the to be scaled image. And a div that will represent the slicer borders.</p>

<pre><code>&lt;div id="image_slicer_canvas"&gt;

        &lt;img src="images/sample.jpg" alt="" border="0" id="image_slicer_image"&gt;&lt;/img&gt;

        &lt;div id="image_slicer"&gt;
            &lt;div id="image_slicer_scaler" class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"&gt;&lt;/div&gt;
        &lt;/div&gt;

    &lt;/div&gt;
</code></pre>

<p>The next thing to do is setup the scaling canvas. So let's make it draggable and resizeable.</p>

<pre><code>// Create a draggable / scalable slicer
       $(function() {
            $('#image_slicer')
            .draggable({containment:'#image_slicer_canvas'}) // constraint
            .resizable();

            // set the slicer canvas size
            resizeCanvas(
                $('#image_slicer_image').width(),
                $('#image_slicer_image').height()
            );
       });
</code></pre>

<p>The only thing we need now is a bit of javascript to handle the slice action. I used a sample form to do the posting to the slicer.php script</p>

<pre><code>// handle slicer actions
       $('#image_slicer').resizable({
          stop: function(event, ui) { 
              var pos = $('#image_slicer').position();
              // width, height, left, top
              $('#scaler_width').val($('#image_slicer').width());
              $('#scaler_height').val($('#image_slicer').height());
              $('#scaler_left').val(pos.left);
              $('#scaler_top').val(pos.top);
          }
       });
</code></pre>

<p>The result is a nice red dotted line (square) on top of the image. The dotted area is draggable and resizeable.
When the right slice is selected just hit the slice button and PHP/GD will do the rest.</p>

<pre><code>$width  = $_POST['width'];
$height = $_POST['height']; 
$left   = $_POST['left'];
$top    = $_POST['top'];

// read source image
$src = imagecreatefromjpeg('images/sample.jpg');
$dest = imagecreatetruecolor($width, $height);

imagecopy($dest, $src, 0, 0, $left, $top, $width, $height);

header('Content-Type: image/jpeg');
imagegif($dest);

imagedestroy($dest);
imagedestroy($src);
</code></pre>

<p>That's all. All files can be downloaded <a href="http://lenss.nl/images/2010/11/imageSlice.tar.gz">here</a></p>
]]></content>
  </entry>
  
</feed>
