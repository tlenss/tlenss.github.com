
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Thijs Lensselink's Blog</title>
  <meta name="author" content="Thijs Lensselink">

  
  <meta name="description" content="Apache SSL Client Side Certificate Data in PHP What should have been a simple assignment turned out to be a hair pulling endeavour. The ultimate &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lenss.nl/page/5/">
  <link href="http://lenss.nl/favicon.png" rel="icon">
  <link href="http://lenss.nl/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="http://lenss.nl/javascripts/libs/jquery-1.8.1.js"></script>
  <script src="http://lenss.nl/javascripts/modernizr-2.0.js"></script>
  <script src="http://lenss.nl/javascripts/ender.js"></script>
  <script src="http://lenss.nl/javascripts/octopress.js"></script>
  <script src="http://lenss.nl/javascripts/github.js"></script>
  <script src="http://lenss.nl/javascripts/twitter.js"></script>
  <link href="http://feeds.feedburner.com/ThijsLensselinksBlog" rel="alternate" title="Thijs Lensselink's Blog" type="application/atom+xml">
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8003524-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <script type="text/javascript">
	$(document).ready(function() {
		$('#logo').click(function() {
			window.location = '/';
		});
	});
  </script>
</head>

<body   >
<div id="content">
	<div class="inner">
        <div class="blog-index">
  
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2011/02/apache-ssl-client-side-certificate-data-in-php/">Apache SSL Client Side Certificate Data in PHP</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>What should have been a simple assignment turned out to be a hair pulling endeavour. The ultimate goal was to read the client side certificate data in PHP. I am by no means a system administrator. And the SSL part will probably be done by somebody more experienced. And the certificates will be signed by real CA&#8217;s. But for developing locally i need something functioning.</p>

<p>So i spend the last hours trying to get client side certificates working. With absolutely no luck. I found a bunch of posts by doing Google searches. But none of them seem to offer the proper information for creating good client side certificates. Creating the CA and the server certificate is no problem at all. But creating a client side certificate seems impossible. Some of the post i tried:</p>

<p><a href="http://www.modssl.org/docs/2.7/ssl_faq.html">http://www.modssl.org/docs/2.7/ssl_faq.html</a>
<a href="http://www.vanemery.com/Linux/Apache/apache-SSL.html">http://www.vanemery.com/Linux/Apache/apache-SSL.html</a>
<a href="http://www.linuxconfig.org/apache-web-server-ssl-authentication">http://www.linuxconfig.org/apache-web-server-ssl-authentication</a>
<a href="https://help.ubuntu.com/community/OpenSSL">https://help.ubuntu.com/community/OpenSSL</a>
<a href="https://help.ubuntu.com/8.04/serverguide/C/httpd.html">https://help.ubuntu.com/8.04/serverguide/C/httpd.html</a>
<a href="http://it.toolbox.com/blogs/securitymonkey/howto-securing-a-website-with-client-ssl-certificates-11500">http://it.toolbox.com/blogs/securitymonkey/howto-securing-a-website-with-client-ssl-certificates-11500</a></p>

<p>You would have thought that something like this would have been documented pretty well by now. But no luck for me. This only resulted in</p>

<blockquote><p>[debug] ssl_engine_kernel.c(1879): OpenSSL: Read: SSLv3 read client certificate A
[debug] ssl_engine_kernel.c(1898): OpenSSL: Exit: failed in SSLv3 read client certificate A
[info] [client xxx.xxx.xxx.xx] SSL library error 1 in handshake (server lab:443)
[info] SSL Library Error: 336151570 error:14094412:SSL routines:SSL3_READ_BYTES:sslv3 alert bad certificate Subject CN in certificate not server name or identical to CA!?</p></blockquote>

<p>So after almost giving up i found the <em>CA.sh</em> script hidden in <em>/usr/lib/ssl/misc</em> this little sucker seems to do the job pretty well. Creating a CA, server certificate and client side certificate is extremely easy. So i settled for that.</p>

<p><strong>Creating the CA</strong></p>

<blockquote><p>$ cd /usr/lib/ssl/misc
$ /CA.sh -newca
CA certificate filename (or enter to create)</p></blockquote>

<p>Making CA certificate &#8230;
Generating a 1024 bit RSA private key
&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;..++++++
&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;++++++
writing new private key to &#8216;./demoCA/private/./cakey.pem&#8217;
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:</p>

<p>And fill out some basic certificate data</p>

<blockquote><p>Country Name (2 letter code) [AU]:NL
State or Province Name (full name) [Some-State]:NH
Locality Name (eg, city) []:Purmerend
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Bluesignal
Organizational Unit Name (eg, section) []:lab
Common Name (eg, YOUR name) []:lab
Email Address []:my@email.tld</p></blockquote>

<p><strong>Creating the server certificates</strong></p>

<blockquote><p>$ ./CA.sh -newreq
Generating a 1024 bit RSA private key
.++++++
&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;++++++
writing new private key to &#8216;newkey.pem&#8217;
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:</p></blockquote>

<p>Fill out the same basic certificate data</p>

<blockquote><p>Country Name (2 letter code) [AU]:NL
State or Province Name (full name) [Some-State]:NH
Locality Name (eg, city) []:Purmerend
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Bluesignal
Organizational Unit Name (eg, section) []:lab
Common Name (eg, YOUR name) []:lab
Email Address []:my@email.tld</p></blockquote>

<p><strong>Sign the sucker</strong></p>

<blockquote><p>$ ./CA.sh -sign
Using configuration from /etc/ssl/openssl.cnf
Enter pass phrase for ./demoCA/private/cakey.pem:
Check that the request matches the signature
Signature ok</p></blockquote>

<p>The only thing left to do is creating the client side certificate</p>

<blockquote><p>openssl pkcs12 -export -in newcert.pem -inkey newkey.key -out username.p12 -name &#8220;Client Certificate&#8221;</p></blockquote>

<p>Time to configure Apache2. I used the standard default-ssl virtual host and just reconfigured it</p>

<blockquote><p>SSLEngine on
SSLProtocol -all +TLSv1 +SSLv3
SSLCipherSuite HIGH:MEDIUM
SSLProxyEngine off
SSLOptions +StrictRequire +OptRenegotiate +StdEnvVars +ExportCertData</p></blockquote>

<p>SSLCertificateFile /usr/lib/ssl/misc/newcert.pem
SSLCertificateKeyFile /usr/lib/ssl/misc/newkey.pem
SSLVerifyClient require
SSLVerifyDepth 1</p>

<p>SSLCertificateChainFile /usr/lib/ssl/misc/demoCA/cacert.pem
SSLCACertificatePath /usr/lib/ssl/misc/demoCA/certs
SSLCACertificateFile /usr/lib/ssl/misc/demoCA/cacert.pem</p>

<p>reboot Apache2</p>

<blockquote><p>$ /etc/init.d/apache2 restart</p></blockquote>

<p>The server side is ready. But it is still impossible to connect at this moment. We need to install the client certificate inside Firefox</p>

<blockquote><p>Edit > Preferences > Advanced > View Certificates</p></blockquote>

<p>Choose import and browse to the newly created *.p12 certificate file.</p>

<p>Now i can finally connect based on my client side certificate and read the pieces of data i was looking for. Which can easily found by doing</p>

<pre><code>print_r($_SERVER);
</code></pre>

<p>Some of the stuff i was looking for</p>

<blockquote><p>[SSL_CLIENT_S_DN_C] => NL
[SSL_CLIENT_S_DN_ST] => NH
[SSL_CLIENT_S_DN_L] => Purmerend
[SSL_CLIENT_S_DN_O] => Bluesignal
[SSL_CLIENT_S_DN_OU] => lab
[SSL_CLIENT_S_DN_CN] => lab
[SSL_CLIENT_S_DN_Email] => my@email.tld
[SSL_CLIENT_I_DN_C] => NL
[SSL_CLIENT_I_DN_ST] => NH
[SSL_CLIENT_I_DN_O] => Bluesignal
[SSL_CLIENT_I_DN_OU] => lab
[SSL_CLIENT_I_DN_CN] => lab
[SSL_CLIENT_I_DN_Email] => my@email.tld</p></blockquote>

<p>Now it&#8217;s time for the fun part.</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2011-02-24T01:55:03+01:00" pubdate data-updated="true">Feb 24<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://lenss.nl/tag/security/'>Security</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2011/02/apache-ssl-client-side-certificate-data-in-php/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2011/02/voices-of-the-elephpant/">Voices of the ElePHPant</a></h1>
	
	</header>
</header>


  <div class="articletext"><p><a href="http://lenss.nl/images/2011/02/elephpant-small.png"><img src="http://lenss.nl/images/2011/02/elephpant-small.png" alt="" /></a> Just found this nice little project <a href="http://blog.calevans.com/">Cal Evans</a> is doing. It&#8217;s called <a href="http://voicesoftheelephpant.com/">Voices of the ElePHPant</a>. The name i guess is dedicated to <a href="http://www.elroubio.net/">Vincent Pontier</a> the creator of the elePHPant. The goal is to shine a light on a special PHP community person. And the kick of is done by <a href="http://www.jeremykendall.net/">Jeremy Kendall</a>. Be sure to check back often for new updates. Or nominate somebody.</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2011-02-21T01:08:26+01:00" pubdate data-updated="true">Feb 21<span>st</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2011/02/voices-of-the-elephpant/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2011/02/dark-theme-for-zend-studio-8/">Dark Theme for Zend Studio 8</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>Because i was so happy with my new <a href="http://lenss.nl/2011/02/extending-my-desktop/">3 monitor configuration</a>. I decided to refresh my development environment as well. Normally all my files would reside in the Devspace older in my user folder under the /home directory. Now i used a new 500 GB <em>SATA</em> drive and formatted it <em>EXT3</em>. Moving your workspace in <a href="http://www.zend.com/en/products/studio/">Zend Studio</a> has the minor inconvenience that the local settings like fonts / syntax colours are lost. <del>I still haven&#8217;t found a way to export this. So i decided to take this opportunity to create a nice new dark theme.</del>. My friend Bart (still no blog?) was friendly enough to let me know how to export the theme related data in ZS. And was nice enough to send me his zenburn theme.</p>

<blockquote><p>File > Export > General > Preferences</p>

<p>File > Import > General > Preferences</p></blockquote>

<p>Bart&#8217;s zenburn theme:
<a href="http://lenss.nl/images/2011/03/zenburn.png"><img src="http://lenss.nl/images/2011/03/zenburn-300x225.png" alt="" /></a></p>

<p>Most developers i know don&#8217;t seem to care much about the colour of their screen and the font they use. But considering the fact that i spend an insanely amount of time behind a screen. It would be nice if this environment i am in all day put the least amount of constrained on my eyes as possible. So i choose to take time and configure this for optimal viewing pleasure. This starts with the font. For years i have been using the <a href="http://damieng.com/blog/2008/05/26/envy-code-r-preview-7-coding-font-released">Envy Code</a> font by <a href="http://damieng.com/">Damien Guard</a> inside my <a href="http://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a>. This all started i think with a <a href="http://www.codinghorror.com/blog/2007/10/revisiting-programming-fonts.html">post</a> by <a href="http://www.codinghorror.com/">Jeff Atwood</a> It&#8217;s a great font that is extremely easy to read even for terminals. Although still in beta. I advice people to use it when possible.</p>

<p>The second thing i configure are the colour schemes my IDE uses. The standard colour always has a white background. White makes sure things are clear. But staring at a white screen for more then 6 hours always resulted in headaches for me. So the darker the better. And with a dark background you are forced to change the rest as well.</p>

<p><strong>Changing the font is first</strong></p>

<blockquote><p>General > Appearance > Colors and Fonts
Font : Envy Code R Bold (11 pt)</p></blockquote>

<p><strong>Second up are some general text editor colours</strong></p>

<blockquote><p>General > Editors > Text Editors
Line number foreground : #787878 (120, 120, 120)
Current line highlight : #35353D (53, 53, 61)
Background color : #25252D (37, 37, 45)</p></blockquote>

<p><strong>And finally the PHP syntax coloring</strong></p>

<blockquote><p>PHP > Editor > Syntax Coloring
Decprecated : #000 (0, 0, 0)
Fields : #FFFFFF (255, 255, 255)
Heredoc     : #008282 (0, 130, 130)
Keyword     : #DE5727 (222, 87, 39)
Multi-line comment : #557F5F (85, 127, 95)
Normal : #FFF (255, 255, 255)
Number : #FFCECE (255, 206, 206)
PHP tags : #DE5727 (222, 87, 39)
PHP Doc : #FEC601 (254, 198, 1)
PHPDoc Comment : #FEC601 (254, 198, 1)
single line comment : #FEC601 (254, 198, 1)
static fields : #FFFFFF (255, 255, 255)
static methods : #FFFFFF (255, 255, 255)
String : #B3C0C8 (179, 192, 200)
Task Tags : #FEC601 (254, 198, 1)
Variable : #0B91B7 (11, 145, 183)</p></blockquote>

<p>The result can be viewed below</p>

<p><a href="http://lenss.nl/images/2011/02/Screenshot-ide-dark.png"><img src="http://lenss.nl/images/2011/02/Screenshot-ide-dark-300x182.png" alt="" /></a></p>

<p>There are much more configuration options to do but for now this is what i came up with. Setting up the theme is a since in ZS. But one thing bothered me. The function / property name highlighting when you select an element inside the IDE. Was a very light colour. And this made it impossible to read the contents of the selection.</p>

<p><a href="http://lenss.nl/images/2011/02/occurrences_on.png"><img src="http://lenss.nl/images/2011/02/occurrences_on-300x20.png" alt="" /></a></p>

<p>So after searching for a while and setting every possible setting in the configuration tabs. I finally figured out how the set the colour for these two actions. This is done from the Annotations setting in the Text editors panel under the general tab. The two options to change are <em>PHP elements read / write occurrences</em>.</p>

<p><a href="http://lenss.nl/images/2011/02/Screenshot-change-bg.png"><img src="http://lenss.nl/images/2011/02/Screenshot-change-bg-300x157.png" alt="" /></a></p>

<p>For now i settled with a dark colour. But maybe i will change this in the future since it is not very readable</p>

<p><a href="http://lenss.nl/images/2011/02/occurrences_off.png"><img src="http://lenss.nl/images/2011/02/occurrences_off-300x20.png" alt="" /></a></p>

<p>That&#8217;s it for now. This of course only sets up the PHP environment. The syntax colours for XML, HTML, CSS and Javascript still have to be changed. But i will leave it at this.</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2011-02-20T22:11:58+01:00" pubdate data-updated="true">Feb 20<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/-home/'>/home</a>, <a class='category' href='http://lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>, <a class='category' href='http://lenss.nl/tag/zend/'>Zend</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2011/02/dark-theme-for-zend-studio-8/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2011/02/extending-my-desktop/">Extending My Desktop</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>Although i am blessed with a nice double 22 inch monitor configuration. I have had this spare monitor sitting on my desk for a while Just asking to be added to the setup. Yesterday i gave it my first shot. It didn&#8217;t really go as planned but the result is fine for the moment.</p>

<p>Over the past years i have been a happy user of <a href="http://www.compiz.org/">Compiz</a> and the <a href="http://wiki.compiz.org/Decorators/Emerald">emerald theme manager</a>. So these were two things i wanted to keep. Well that&#8217;s not going to happen. After playing around with xorg.conf for a couple of hours i just couldn&#8217;t manage to get the configuration i was looking for.</p>

<ol>
<li>Single X Screen on the left</li>
<li>Two <a href="http://www.nvidia.com/object/feature_twinview.html">twinview</a> screens on the right.</li>
</ol>


<p>I managed to get Compiz to work with the 3 monitor setup. But this resulted in either having one large desktop extending the two 22 inch monitors. Or 3 screen using Compiz but with no possibility of sharing data between the screens. That just sucked. I have to admit this is one thing that just works better on Windows.</p>

<p>So the next was <a href="http://sourceforge.net/projects/xinerama/">Xinerama</a>. This meant switching Xinerama to &#8220;1&#8221; in the config and restart X. Voila! Everything works. Well not everything. I have no Compiz effects and no emerald themes. So it&#8217;s slightly more ugly looking but it functions perfectly. So i will be keeping this config for now. Until i can either figure out how to get 3 monitors working using Compiz. Or get some effects / cool themes working while using Xinerama.</p>

<p><a href="http://lenss.nl/images/2011/02/IMG_2081.jpg"><img src="http://lenss.nl/images/2011/02/IMG_2081-300x225.jpg" alt="" /></a></p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2011-02-20T20:54:08+01:00" pubdate data-updated="true">Feb 20<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/-home/'>/home</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2011/02/extending-my-desktop/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2011/02/you-want-to-do-what-with-php/">You Want to Do What With PHP?</a></h1>
	
	</header>
</header>


  <div class="articletext"><p><a href="http://www.amazon.com/You-Want-Do-What-PHP/dp/1583470999"><img src="http://lenss.nl/images/2011/02/whatwithphp.jpg" alt="" /></a> I finally took the time to read &#8217;<a href="http://www.amazon.com/You-Want-Do-What-PHP/dp/1583470999">You want to do what with PHP?</a>&#8217;. Normally i would not write about the books i read. But this book is a bit different. And since i won a copy of <a href="http://www.eschrade.com/">Kevin Schroeder&#8217;s</a> book in a twitter sweepstake. I thought i might as well write a small review to show a bit of gratitude. I will keep it short.</p>

<p>Kevin is Zend Evangelist for products like the <a href="http://framework.zend.com/">Zend Framework</a>, <a href="http://www.zend.com/products/server/">Zend Server</a>, <a href="http://www.zend.com/products/studio/">Zend Studio</a> and co writer of the book The IBM i <a href="http://www.mc-store.com/5096.html">Programmer&#8217;s Guide to PHP</a></p>

<p>It&#8217;s been a while since i read a PHP related book. I have been doing PHP based development for the past 10 years. And after reading almost every book of value on this topic. It&#8217;s hard to find something interesting to read about it. Most books just go over the basics. Or target a specific project / way of developing.</p>

<p>This book is a bit different from what i have read so far. And it will get a nice place near my other books of value. So what does make this book so different? First of all the topics that pass by are some of the more advanced topics you will come by in the PHP world. A lot of it is related to low level programming. So a bit of experience or interest in this subject is a must. Besides the advanced topics Kevin shows how to solve issues in ways i have never done them before. And that probably comes down to his experience with more low level languages like C.</p>

<p>He touches topics like Networking and sockets, Binary protocols, character encoding, streams, SPL, Asynchronous operations, file access, Daemons, And two great chapters about debugging, good development practises and just how to become a better developer in general. The book has a considerable amount of binary math in it which is cool. And which is also needed when doing things like handling raw TCP/IP and TCP/UDP data, writing stream handlers or creating your own file-system.</p>

<p>Maybe not all of the material touched in the book is relevant to web development. And most of us will probably never have to write an HTTP daemon in PHP. But the way Kevin tackles problems showed me things i never thought of before and new ways to attack old problems.</p>

<p>It gave me some good pointers for a webcrawler i have been working on. As i have wanted to add threading to this for a long time now. Besides that i just had a lot of fun reading this book. And would definitely advocate other developers to read it as well.</p>

<p>Added a review on <a href="http://www.amazon.com/review/R3MH7ULASZ1III/ref=cm_cr_dp_perm?ie=UTF8&amp;ASIN=1583470999&amp;nodeID=283155&amp;tag=&amp;linkCode=">Amazon</a> as well.</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2011-02-06T08:30:30+01:00" pubdate data-updated="true">Feb 6<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>, <a class='category' href='http://lenss.nl/tag/zend/'>Zend</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2011/02/you-want-to-do-what-with-php/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2011/01/new-generation-elephpants-arrived/">New Generation elePHPants Arrived!!</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>Yesterday i got a message that the new generation of elePHPants are available for bulk pre-order. I am very happy the <a href="http://elephpant.com/">elephpant.com</a> site is finally up and running. For the past two years i have been shipping a lot of these blue guys all across the world. No need for me to do that any more.</p>

<p>A big thanks for this furry blue creature goes out to:</p>

<p><a href="http://www.elroubio.net/naissance_elephpant.php">Vincent Pontier</a>
<a href="http://www.nexen.net/">Damien Seguy</a>
<a href="http://blog.hello-design.fr/">Christophe Villeneuve</a>
<a href="http://cesarodas.com/">Cesar Rodas</a></p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2011-01-06T12:28:30+01:00" pubdate data-updated="true">Jan 6<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://lenss.nl/tag/design/'>Design</a>, <a class='category' href='http://lenss.nl/tag/php/'>PHP</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2011/01/new-generation-elephpants-arrived/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2010/12/best-wishes/">Best Wishes</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>As the year is coming to an end. I realise i haven&#8217;t posted anything this last month. And i have load of things on my mind. But no time. I&#8217;ll be heading over to a friends house for the remaining part of this year. So i wish everybody a good and happy 2011. Don&#8217;t drink to much and be careful with fireworks.</p>

<p>On a side note: did anybody check out the new <a href="http://php.net">php.net</a> layout? i think Hannes and Co are doing a great job!</p>

<p>(to see the new layout go to <a href="http://php.net/my">php.net/my</a> and flip the beta switch at the bottom of the page)</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2010-12-31T14:58:50+01:00" pubdate data-updated="true">Dec 31<span>st</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/-home/'>/home</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2010/12/best-wishes/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2010/11/moving-from-subversion-to-git/">Moving From Subversion to GIT</a></h1>
	
	</header>
</header>


  <div class="articletext"><p><a href="http://git-scm.com/"><img src="http://lenss.nl/images/2010/11/git.logo_.gif" alt="" /></a> Last weekend was a <a href="http://pfz.nl">PFZ</a> meeting. And for this day a few interesting <a href="http://www.pfz.nl/activiteit/1-workshopdag-2010/">workshops</a> were planned. I mainly was looking forward to the GIT (Git for Subversion Users) talk by <a href="http://www.leftontheweb.com/">Stefan Koopmanschap</a>. And the Dependency Injection presentation by <a href="http://blog.berryllium.nl/">Berry Langerak</a> I didn&#8217;t make it too the last one. But learned a lot while doing the GIT workshop with Stefan.</p>

<p>For the last few months i have wanted to take a look at git. But it just never really took the time to sit down and do it. So this opportunity was there at the right time. Although my laptop died halfway through the workshop. I still was able to make it through the whole session together with <a href="http://accentinteractive.nl/">Joost van Veen</a>. Thanks man. We had a great time. And it was eye opening. Stefan gave a good talk. Helped out where possible. And besides a small <a href="https://github.com/">Github</a> glitch. It was a successful day.</p>

<p>So successful that i decided to make the switch from <a href="http://subversion.tigris.org/">Subversion</a> to <a href="http://git-scm.com/">GIT</a>. Below are some of the steps i took.</p>

<p>The main reasons for me to make the switch</p>

<ul>
<li><p>Distributed structure make it easy to work from any place. connected or not.</p></li>
<li><p>Stashing</p></li>
<li><p>Speed and cleaner folder / file structure</p></li>
<li><p>Real tags</p></li>
</ul>


<p>That&#8217;s all for now. but this list will grow. I am sure!</p>

<h2>Setting up a GIT server</h2>

<p>I decided to go for my own GIT server instead of Github. That&#8217;s just the way i like it. Full control.</p>

<blockquote><p><strong>$</strong> aptitude install git-core</p></blockquote>

<p>Now all we have to do is create a user for git operations. And set the correct permissions.</p>

<blockquote><p><strong>$</strong> adduser git
<strong>$</strong> mkdir /home/git/.ssh
<strong>$</strong> chown -R git:git /home/git/.ssh
<strong>$</strong> chmod 700 /home/git</p></blockquote>

<p>If we want to create a new remote repository. We log in on the git server through SSH and setup a new repository like this.</p>

<blockquote><p><strong>$</strong> ssh git@git.domain.tld
<strong>$</strong> mkdir repository.git
<strong>$</strong> cd repository.git
<strong>$</strong> git &#8211;bare init</p></blockquote>

<p>That&#8217;s all. we now have all we need to connect to git remotely and do some work. But now first we need to import the old Subversion repository. I have found two solid methods for getting the job done.</p>

<h2>Import a SVN project into GIT with git-svn</h2>

<p>First of install git-svn</p>

<blockquote><p><strong>$</strong> sudo aptitude install git-svn</p></blockquote>

<p>Before we start the importing. It&#8217;s good practice to create an author mapping file. So the SVN commiter names match the GIT ones. This is done by creating a simple text file like so.</p>

<blockquote><p><strong>$</strong> touch authors.txt
<strong>$</strong> echo &#8220;m0s = Thijs Lensselink <a href="&#x6d;&#97;&#105;&#108;&#116;&#111;&#x3a;&#101;&#109;&#x61;&#105;&#x6c;&#64;&#x6c;&#101;&#110;&#115;&#115;&#46;&#110;&#x6c;">&#x65;&#109;&#97;&#105;&#x6c;&#64;&#108;&#x65;&#110;&#x73;&#x73;&#46;&#x6e;&#x6c;</a>&#8221; > authors.txt</p></blockquote>

<p>Importing the existing <em>tags</em> and <em>branches</em> is done by adding the <em>&#8211;stdlayout</em> switch</p>

<blockquote><p><strong>$</strong> git svn clone &#8211;stdlayout -A authors.txt svn+ssh://user@svnhost/repository repository.git</p></blockquote>

<p>The problem with this method is that tags and branches are not created properly. I decided to go for the second method down here.</p>

<h2>Import a SVN project into GIT with svn2git</h2>

<p>For this to work we first need ruby and some gems packages.</p>

<blockquote><p><strong>$</strong> apt-get install git-svn ruby rubygems
<strong>$</strong> gem install svn2git &#8211;source http://gemcutter.org</p></blockquote>

<p>Create the local repository and import the files from SVN</p>

<blockquote><p><strong>$</strong> mkdir repository.git
<strong>$</strong> cd repository.git
<strong>$</strong> /var/lib/gems/1.8/bin/svn2git svn+ssh://user@svnhost/repository &#8211;authors ../authors.txt</p></blockquote>

<p>Show the current selected branch</p>

<blockquote><p><strong>$</strong> git branch
* master</p></blockquote>

<p>Show all branches. Notice the <em>trunk</em> branch</p>

<blockquote><p><strong>$</strong> git branch -a
* master
  trunk</p></blockquote>

<p>List all tags</p>

<blockquote><p><strong>$</strong> git tag -l
v1.0
v2.0</p></blockquote>

<p>That seemed to work pretty good for almost all projects. Some projects didn&#8217;t have the main trunk in SVN. So to import these just add the <em>&#8211;rootistrunk</em> switch.</p>

<p>And while this info is still available in my brain at the moment. I will write down some of the workshop material for future reference.</p>

<h2>Setup local Development environment</h2>

<p>Create directory somewhere that will serve as the local repository. And run <em>init</em> to create the basic git project structure.</p>

<blockquote><p><strong>$</strong> mkdir [project name]
<strong>$</strong> cd [project name]
<strong>$</strong> git init</p></blockquote>

<p>Now we have a fully functional git repository. We can do anything with (add, commit, tag, branch, push, etc.)  The first things to do when starting out is setup the user name and email address of the developer using this repository. This is good when looking though the GIT project logs later on. Also handy to set the core editor to the most convenient editor available.</p>

<blockquote><p><strong>$</strong> git config &#8211;global user.name &#8220;Thijs Lensselink&#8221;
<strong>$</strong> git config &#8211;global user.email &#8220;email@lenss.nl&#8221;
<strong>$</strong> git config &#8211;global core.editor vi</p></blockquote>

<p>The repository exists out of a <em>origin</em> and a <em>master</em> branch at this moment. The origin refers to the current repository location. And the master refers to the current repository state. Like HEAD in CVS and SVN. Let&#8217;s add a file for testing.</p>

<blockquote><p><strong>$</strong> touch index.php
<strong>$</strong> git add index.php (or add *)
<strong>$</strong> git commit -m &#8220;Commit something&#8221;</p></blockquote>

<p>Working on a local repository is nice. but we want to save it on a server of course. For this we need to set a repository location. We can do this in two ways. We can overwrite the origin or add a new location. Let&#8217;s try the first one.</p>

<blockquote><p><strong>$</strong> git remote add origin git@git.domain.tld:repository.git</p></blockquote>

<h2>Setting up the remote git repository and push the changes</h2>

<p>All changes to this repository are made locally so far. Let&#8217;s try and push them to the git server. The only problem here is. I haven&#8217;t found a way to create repositories remotely. So we have to log in to the server here and create the repository.</p>

<blockquote><p><strong>$</strong> ssh git@git.domain.tld
<strong>$</strong> mkdir repository.git
<strong>$</strong> cd repository.git
<strong>$</strong> git &#8211;bare init
<strong>$</strong> exit</p></blockquote>

<p>Back on the client side we can now do a push an see what happens.</p>

<blockquote><p><strong>$</strong> git push origin master
Counting objects: 3, done.
Writing objects: 100% (3/3), 232 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
To git@192.168.178.24:foo.git
 * [new branch]      master -> master</p></blockquote>

<p>if you get this error:</p>

<blockquote><p>error: src refspec master does not match any.</p></blockquote>

<p>This means there is no master branch yet. This happens when the repository was created with the &#8211;bare switch. You have to commit a change first before you can push anything to the remote repository server.</p>

<p>That&#8217;s all. We now have a working GIT server and local repository. All that is left is to do some serious development work. On the other hand, before i forget. i will use this space to rehash Stefan&#8217;s workshop for future reference.</p>

<h2>Tagging</h2>

<p>Let start by looking at the way git creates tags. First of there are two types of tags <em>lightweight</em> and <em>annotated</em>. The lightweight version is nothing more then a pointer to a specific commit. It&#8217;s like a branch that doesn&#8217;t change. Annotated tags are a bit different then their lightweight version. And for sure different from the tags in Subversion. A tags in git contains the following data</p>

<ul>
<li><p>checksum</p></li>
<li><p>tagger name</p></li>
<li><p>email + date</p></li>
<li><p>tag message</p></li>
<li><p>GPG signed</p></li>
</ul>


<p>Creating an annotated tag for version 1 looks something like this</p>

<blockquote><p><strong>$</strong> git tag -a v1.0 -m &#8220;Creating a tag&#8221;</p></blockquote>

<p>Dispaly a certain tag</p>

<blockquote><p><strong>$</strong> git show v1.0</p></blockquote>

<p>I haven&#8217;t had time to look into working with signing of tags. So maybe i will add an entry about that later on.</p>

<h2>Branching</h2>

<p>A repository can have multiple branches. And switching between branches is a since in git. Branching is much like
it is in Subversion.</p>

<p>Create a new branch from master called foo</p>

<blockquote><p><strong>$</strong> git branch foo master</p></blockquote>

<p>Display all branches available. The current branch is highlighted by the * sign</p>

<blockquote><p><strong>$</strong> git branch
* master
  foo</p></blockquote>

<p>Changing branches in git is a piece of cake.</p>

<blockquote><p><strong>
$</strong> git checkout foo
Switched to branch &#8216;foo&#8217;</p></blockquote>

<p>There is not much more to branching.</p>

<h2>diff, merge and delete branches</h2>

<p>When adding a new feature to an existing code base. It&#8217;s good practice to create a branch before you start editing. And after everything is done and the change is stable. The branch can be merged back into the master.</p>

<p>First let&#8217;s check if there is a difference between the newly created branch and the master.</p>

<blockquote><p><strong>$</strong> git diff foo master
diff &#8211;git a/touch.foo b/touch.foo
deleted file mode 100644
index 257cc56..0000000
&#8212; a/touch.foo
+++ /dev/null
@@ -1 +0,0 @@
-foo</p></blockquote>

<p>Some changes have been found so let&#8217;s merge them in the master branch</p>

<blockquote><p><strong>$</strong> git checkout master
<strong>$</strong> git merge foo master (or git pull foo master)
Already up-to-date with 12d2f9cebaf71a580b021a8eeddc38f267b69e53
Trying simple merge with 4d3dff7e0d2a26302a5884e763fd7a48f5ab4437
Merge made by octopus.
 touch.foo |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 touch.foo</p></blockquote>

<p>with <em>git pull</em> it is possible to import branches from other repositories</p>

<p>When done with the changes. And everything is pushed to the remote git server, we can remove the &#8216;foo&#8217; branch</p>

<blockquote><p><strong>$</strong> git branch -d foo
Deleted branch foo (was d9a8c76).</p></blockquote>

<p>That&#8217;s all for branching right now.</p>

<h2>Stashing</h2>

<p>One of my personal favorite the stash command. Imagine working on a project. And somebody asks you to make a small change. In subversion i needed to do a new checkout and work on that. This can be quite slow and cumbersome. In git this is solved elegantly by using the stash command.</p>

<blockquote><p><strong>$</strong> git stash
Saved working directory and index state &#8220;WIP on master: 648f347&#8230; foo&#8221;
(To restore them type &#8220;git stash apply&#8221;)
HEAD is now at 648f347 foo</p></blockquote>

<p>This saves a copy of the working state and let&#8217;s you do changes on a fresh base. After your done get back to your work by doing</p>

<blockquote><p><strong>$</strong> git stash pop (or apply)</p></blockquote>

<p>With pop you push the stash back to the master. With apply the changes will first be applied to the master before restoring the work state.</p>

<h2>Working with other repositories</h2>

<p>Clone a repository from a remote GIT server</p>

<blockquote><p><strong>$</strong> git clone git@git.domain.tld:repository.git ./project2</p></blockquote>

<p>Clone a local GIT repository</p>

<blockquote><p><strong>$</strong> git clone ./project ./project2</p></blockquote>

<p>Now it could be possible a friend or a remote community member without write access made a few changes to his / her remote repository. And wants them on the global remote GIT server. This can be done by pulling the code.</p>

<p>First add the new repository location</p>

<blockquote><p><strong>$</strong> git remote add friend git://githubaddress</p></blockquote>

<p>And then fetch the remote changes</p>

<blockquote><p><strong>$</strong> git fetch friend</p></blockquote>

<p>This only fetches the changes. but does not apply them to the master. Apply them</p>

<blockquote><p><strong>$</strong> git pull friend master</p></blockquote>

<p>updating remote repository</p>

<blockquote><p><strong>$</strong> git push friend master</p></blockquote>

<p>That&#8217;s all i can remember right now.</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2010-11-16T22:12:50+01:00" pubdate data-updated="true">Nov 16<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/-home/'>/home</a>, <a class='category' href='http://lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2010/11/moving-from-subversion-to-git/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2010/11/nsd-unknown-keyalgorithm/">NSD Unknown Key/algorithm</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>As i was trying to get ready to convert my SVN repository into a GIT repository. I noticed one of my DNS slave servers wasn&#8217;t responding. A look at the log files showed something was wrong.</p>

<p>The master server showed:</p>

<blockquote><p>[1289693117] nsd[6899]: error: query tsig unknown key/algorithm</p></blockquote>

<p>While the slave displayed the following message</p>

<blockquote><p>[883615032] nsd[6624]: error: xfrd: zone [ domain ] received error code REFUSED from [ ip address ]</p></blockquote>

<p>After an hour of searching Google and not hitting any useful result. I rebooted the machine. And was presented by forced hard disk check. The damn thing seemed to be out of sync. And when rebooted. The date was off by a few centuries.</p>

<p>So after resetting the date and restarting <a href="http://www.nlnetlabs.nl/projects/nsd/">NSD</a>. The problem was resolved.</p>

<blockquote><p>$ date -s &#8216;14 NOV 2010 01:37:00&#8217;
$ /usr/sbin/nsdc update > /dev/nul 2>%1
$ /usr/sbin/nsdc patch > /dev/nul 2>%1
$ /usr/sbin/nsdc rebuild > /dev/nul 2>%1
$ /usr/sbin/nsdc reload > /dev/nul 2>%1
$ /usr/sbin/nsdc notify > /dev/nul 2>%1</p></blockquote>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2010-11-14T02:38:11+01:00" pubdate data-updated="true">Nov 14<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/-home/'>/home</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2010/11/nsd-unknown-keyalgorithm/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  
  <article>
  
<header>
	<header>
	
	  <h1 class="entry-title"><a href="http://lenss.nl/2010/11/google-mod_pagespeed-continued/">Google Mod_pagespeed Continued</a></h1>
	
	</header>
</header>


  <div class="articletext"><p>Last week i <a href="http://lenss.nl/2010/11/google-mod_pagespeed/">toyed</a> with <a href="http://code.google.com/p/modpagespeed/">mod_pagespeed</a> a bit. But just couldn&#8217;t get the hang of it. So the last two days permitted me to play some more with this great Apache module. Only this time i choose to <a href="http://code.google.com/p/modpagespeed/wiki/HowToBuild">build from source</a> and ignore the binaries for a while.</p>

<p>For me the main problem was. As soon as i enabled the module. It was active for all sites running on this server. And that should not be a problem. But some of these sites are Wordpress monsters. That are ready to take any server down with a bit of high load.</p>

<p>So after a bit of trail and error. I figured out i could just disable mod_pagespeed globally by altering the main config file. After Apache reloaded mod_pagespeed was not active for the running sites.</p>

<p>in /etc/apache2/mods-available/pagespeed.conf make sure ModPagespeed is set to &#8216;off&#8217;</p>

<blockquote><p>ModPagespeed off</p></blockquote>

<p>So now i can simply enable settings i need on a per vhost basis. For this site end some other sites i used the following config section in my vhost.</p>

<blockquote><h1>MOD-pagespeed</h1></blockquote>

<pre><code>        SetOutputFilter MOD_PAGESPEED_OUTPUT_FILTER
        ModPagespeed on

        ModPagespeedUrlPrefix                "http://lenss.nl"

        ModPagespeedFileCachePath            "/var/mod_pagespeed/cache/"
        ModPagespeedGeneratedFilePrefix      "/var/mod_pagespeed/files/"

        #ModPagespeedRewriteLevel CoreFilters
        ModPagespeedRewriteLevel PassThrough

        ModPagespeedEnableFilters add_head
        ModPagespeedEnableFilters collapse_whitespace
        ModPagespeedEnableFilters elide_attributes
        ModPagespeedEnableFilters remove_comments
        ModPagespeedEnableFilters rewrite_css
        ModPagespeedEnableFilters rewrite_javascript
        ModPagespeedEnableFilters move_css_to_head
</code></pre>

<p>First of we enable mod_pagespeed of course. And then we set the current domain for this instance. After that we set the file paths for the altered and cached files. And we use &#8216;PassThrough&#8217; instead of &#8216;CoreFilters&#8217;. So we can decide our self&#8217;s what filters we will be using.</p>

<p>This had a much better result then my previous attempts. The server was still happily serving pages. And the load was OK. So let&#8217;s check the sites if mod_pagespeed is actually running.</p>

<blockquote><p>$ wget -O /dev/null &#8211;server-response http://lenss.nl 2>&amp;1| grep -i &#8216;X-Mod-Pagespeed&#8217;
  X-Mod-Pagespeed: 0.9.0.0-172</p></blockquote>

<p>Well that looks good. So now it&#8217;s time to do some testing. And this leaves me with a bit of a pickle. As i don&#8217;t have the required wget v 1.12 (i have a small patch for wget v1.11). Besides that i have some other problems running the tests</p>

<blockquote><p>TEST: 404s are served and properly recorded.</p>

<pre><code>  wget -O /dev/null http://lenss.nl/mod_pagespeed/ic.a.bad.css 2&gt;&amp;1| grep -q '404 Not Found'
  wget -q -O - --save-headers http://localhost:80/mod_pagespeed_statistics | grep -q 'resource_404_count: 1'
</code></pre>

<p>FAIL.</p></blockquote>

<p>This fails because the statistics page requested is not available because this site uses rewrites. And i haven&#8217;t found a way to go around this yet besides disabling them in .htaccess with mod_rewrite. So shortly disabling this made it possible to run the biggest part of the test suite without problems.</p>

<blockquote><p>resource_fetches: 2
total_page_load_ms: 0
page_load_count: 0
cache_extensions: 0
not_cacheable: 0
css_file_count_reduction: 0
css_filter_files_minified: 13
css_filter_minified_bytes_saved: 5082
css_filter_parse_failures: 0
css_elements: 0
image_inline: 0
image_rewrite_saved_bytes: 0
image_rewrites: 0
javascript_blocks_minified: 15
javascript_bytes_saved: 380
javascript_minification_failures: 0
javascript_total_blocks: 15
resource_url_domain_rejections: 0
url_trims: 0
url_trim_saved_bytes: 0
resource_404_count: 2
slurp_404_count: 0
serf_fetch_request_count: 0
serf_fetch_bytes_count: 0
serf_fetch_time_duration_ms: 0
serf_fetch_cancel_count: 0</p></blockquote>

<p>It fails on the image compression part and that&#8217;s fine. Because i will leave that for later. So let&#8217;s run the site through the pagespeed browser extension with mod_pagespeed disabled:</p>

<blockquote><p>load time without : 2.193
firebug/pagespeed score : 68</p></blockquote>

<p>Now the same thing but with mod_pagespeed enabled:</p>

<blockquote><p>Load time with : 1.284
firebug/pagespeed score : 90</p></blockquote>

<p>That looks pretty good. And the other sites i have tested preform way better with the mod_pagespeed module enabled.</p>

<p>I still have some Javascript issues. Some things need further inspection because i have seen error like these coming along:</p>

<blockquote><p>Permission denied for  to call method Location.toString on .</p></blockquote>

<p>Besides that. This morning my site was down due to Apache spitting segfaults. I disabled the &#8216;rewrite_javascript&#8217; filter for now. And it seems to run a bit more stable.</p>

<blockquote><p>[Thu Nov 11 07:38:24 2010] [notice] child pid 23608 exit signal Segmentation fault (11)</p></blockquote>

<p>So besides it being a beta i am pretty impressed by the current state of this module. And after running it for a couple of weeks the statistics are pretty impressive.</p>

<p><img src="http://lenss.nl/images/2010/12/page-speed.jpg" alt="" /></p>

<p>Manuel Lemos also wrote a nice article about <a href="http://www.phpclasses.org/blog/post/135-Accelerate-Web-Pages-Automatically-using-Google-ModPageSpeed-Unusual-Site-Speedup-Techniques-Part-4.html">mod_pagespeed</a> which is worth reading.</p>
</div>
  
  


<div style="clear:both;"></div>

  <footer>
     <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Thijs Lensselink</span></span>

      








  


<time datetime="2010-11-11T12:08:45+01:00" pubdate data-updated="true">Nov 11<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='http://lenss.nl/tag/-home/'>/home</a>, <a class='category' href='http://lenss.nl/tag/code/'>Code</a>, <a class='category' href='http://lenss.nl/tag/google/'>Google</a>, <a class='category' href='http://lenss.nl/tag/tech/'>Tech</a>
  
</span>


    </p>
    <div class="share">
		<ul>
			<li><a href="http://lenss.nl/2010/11/google-mod_pagespeed-continued/#disqus_thread">Comments</a></li>
		</ul>
	</div>
  </footer>
  </article>
  
  <div class="blog-navigation">
    
      <div class="alignleft"><a class="prev" href="http://lenss.nl/page/6/">&larr; Older</a></div>
    
    
    <div class="alignright"><a class="next" href="http://lenss.nl/page/4/">Newer &rarr;</a></div>
    
  </div>
  <div class="blog-copy">
      Copyright &copy; 2013 - Thijs Lensselink -
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  </div>
</div>

	</div>
</div>

<div id="sidebar">
  
    
<div id="logo" class="sidebox">
	<div id="logo-main">lenss<span class="nl">nl</span></div>
	<div id="logo-sub"><span class="nl">Thijs Lensselink's Blog</span></div>
</div>

<div class="sidebox">
	<a href="http://www.facebook.com/thijs.lensselink#!/" class="social facebook"></a>
	<a href="https://plus.google.com/117496548747841671883" class="social google"></a>
	<a href="http://twitter.com/tlenss" class="social twitter"></a>
	<a href="http://feeds.feedburner.com/ThijsLensselinksBlog" class="social rss"></a>
	<div style="clear:both;"></div>
</div>

<div class="sidebox">
	<h1>Me</h1>
	<div class="me">
		<a href="http://www.zend.com/store/education/certification/yellow-pages.php#show-ClientCandidateID=ZEND006598"><img src="http://lenss.nl/images/php5-zce-logo-new.gif" height="58" /></a>
		<a href="http://stackoverflow.com/users/476697/tlenss">
			<img src="http://stackoverflow.com/users/flair/476697.png?theme=dark" width="208" height="58" alt="profile for tlenss at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for tlenss at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
		</a>
		<div class="gpg">
			Key ID : <a href="http://lenss.nl/6AD79CEF.asc">0x6AD79CEF</a><br/>
			FP : FB53 B9D6 D7F1 9A16 1456 4DB3 3D35 402F 6AD7 9CEF
		</div>
	</div>
</div>

<section>
  <div class="sidebox">
	<h1>Recent entries</h1>
	<ul class="linklist">
		
		<li><a href="http://lenss.nl/2013/03/casting-weirdness-with-PHP/"><span class="higlight">March, 2013</span> Casting weirdness with PHP</a></li>
		
		<li><a href="http://lenss.nl/2013/02/zend-optimizer%2B-integrated-in-5.5/"><span class="higlight">February, 2013</span> Zend Optimizer+ integrated into 5.5</a></li>
		
		<li><a href="http://lenss.nl/2013/02/phpness-serious-wtf/"><span class="higlight">February, 2013</span> PHPness Serious WTF</a></li>
		
		<li><a href="http://lenss.nl/2012/11/publish-google-reader-shared-items/"><span class="higlight">November, 2012</span> Publish Google Reader shared items</a></li>
		
		<li><a href="http://lenss.nl/2012/10/long-running-php-script-and-mysql-server-gone-away/"><span class="higlight">October, 2012</span> Long running PHP script and MySQL server gone away</a></li>
		
		<li><a href="http://lenss.nl/2012/10/git-rebase-on-pull-by-default/"><span class="higlight">October, 2012</span> Git: Rebase on pull by default</a></li>
		
		<li><a href="http://lenss.nl/2012/10/workaround-ubuntu-12-04-mysterious-system-freezes/"><span class="higlight">October, 2012</span> Workaround Ubuntu 12.04 mysterious system freezes</a></li>
		
		<li><a href="http://lenss.nl/2012/09/fixing-character-replacement-in-wordpress/"><span class="higlight">September, 2012</span> Fixing character replacement in Wordpress</a></li>
		
		<li><a href="http://lenss.nl/2012/09/resize-a-vagrant-vmdk-drive/"><span class="higlight">September, 2012</span> Resize a Vagrant VMDK drive</a></li>
		
		<li><a href="http://lenss.nl/2012/09/git-coming-up-with-a-good-workflow/"><span class="higlight">September, 2012</span> GIT:  Coming up with a good workflow</a></li>
		
	</ul>
</div>
</section>

<div class="sidebox ad">
	<script type="text/javascript"><!--
	google_ad_client = "ca-pub-0921745317573569";
	/* nlblue_side */
	google_ad_slot = "7706621160";
	google_ad_width = 300;
	google_ad_height = 250;
	//-->
	</script>
	<script type="text/javascript"
	src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
	</script>
</div>
<div class="sidebox">
	<h1>Tags</h1>
	<ul id="tag-cloud" class="blocklist"><a href='http://lenss.nl/tag/-home' style='font-size: 116.84210526315789%'>/home(32)</a> <a href='http://lenss.nl/tag/code' style='font-size: 160.0%'>Code(114)</a> <a href='http://lenss.nl/tag/design' style='font-size: 103.15789473684211%'>Design(6)</a> <a href='http://lenss.nl/tag/freelance' style='font-size: 102.10526315789474%'>Freelance(4)</a> <a href='http://lenss.nl/tag/google' style='font-size: 101.57894736842105%'>Google(3)</a> <a href='http://lenss.nl/tag/javascript' style='font-size: 104.21052631578948%'>Javascript(8)</a> <a href='http://lenss.nl/tag/jquery' style='font-size: 101.05263157894737%'>Jquery(2)</a> <a href='http://lenss.nl/tag/magento' style='font-size: 101.05263157894737%'>Magento(2)</a> <a href='http://lenss.nl/tag/php' style='font-size: 133.68421052631578%'>PHP(64)</a> <a href='http://lenss.nl/tag/security' style='font-size: 104.21052631578948%'>Security(8)</a> <a href='http://lenss.nl/tag/sql' style='font-size: 103.15789473684211%'>SQL(6)</a> <a href='http://lenss.nl/tag/tech' style='font-size: 150.5263157894737%'>Tech(96)</a> <a href='http://lenss.nl/tag/zend' style='font-size: 104.21052631578948%'>Zend(8)</a> </ul>
	<div style="clear:both;"></div>
</div>
<section>
  <div class="sidebox">
	<h1>GitHub Repos</h1>
	
	<ul class="linklist" id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/tlenss" class="github-follow-button">Follow On GitHub</a>
  <script type="text/javascript" src="http://octophile.com/widgets.js"></script>
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = 'http://lenss.nl/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'tlenss',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="http://lenss.nl/javascripts/github.js" type="text/javascript"> </script>
</div>
</section>

<section>
  <div class="sidebox">
	<h1>Latest Tweets</h1>
	<ul class="linklist" id="tweets">
    <li class="loading"><span class="higlight">Status updating...</span></li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("tlenss", 4, false);
    });
  </script>
  <script src="http://lenss.nl/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/tlenss" class="twitter-follow-button" data-show-count="false">Follow @tlenss</a>
  
</div>
</section>


  
</div>

<footer role="contentinfo">
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'tlenss';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>